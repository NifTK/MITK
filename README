Introduction
============

This repository is a version of MITK, as used by the NifTK project.

The original MITK is here:
http://git.mitk.org/MITK.git

The original MITK is mirrored to GitHub here:
https://github.com/MITK/MITK

This repository is a fork of https://github.com/MITK/MITK.


Updating the master branch
==========================

The master branch should exactly match the MITK master. We update
a local branch here, just so we have a reference of which commit
we think we have merged up to.

So:

git remote add upstream https://github.com/MITK/MITK
git checkout master
git pull upstream master
git push origin master


Updating the niftk branch
=========================

git checkout niftk
git merge --no-ff master

(and try to put something useful in the commit message)


Differences between niftk branch and master branch
==================================================

The NifTK project aims to have as few differences as possible between
this version of MITK and the original MITK. All bugfixes should be 
raised in the MITK bugzilla http://bugs.mitk.org/ and then a branch
created here, forking from master and using the branch naming convention

bug-<MITK bugzilla number>-trac-<trac ticket number>-description

for example

bug-16074-trac-2742-run-app-from-current-dir

MITK can then merge the bugfix into their code, and we pick up the fix
when we update our master branch, and consequently merge into the
niftk branch.

There are however cases where the NifTK project requires functional differences.
Again, these should be as few as possible.  In this case there may or may not
be a bugzilla bug report raised with MITK, so the branch naming convention should
either be the same as the above, or just

trac-<trac ticket number>-description 

These functional differences should still be forked from master so that if MITK 
want to merge it back to their code-base, they can. We would however immediately
merge it into the niftk branch once testing was complete.


Known Differences between niftk branch and master branch
========================================================

The following is a list of differences as of 2014-05-21:

1. Branch: trac-2711-MITK-README

   This README was added, and which is then updated from many branches.

2. Branch: trac-2717-patched-Geometry2DDataVtkMapper3D

   Provide property to turn off black background in Geometry2DDataVtkMapper3D.

   It was found that an image used as a plane in a 3D window using 
   mitkGeometry2DDataVtkMapper3D.h would be visible in one 3D window, and not
   in another 3D window. This may be related to MITK bug 2134. 

3. Branch: trac-2571-data-manager-dnd-derived-nodes

   Provide ability to drag and drop nodes in DataManager, so that
   the dropped node becomes a child of the drop target.

4. Branch: trac-2333-qRestAPI-library-dir
           trac-2747-quazip-library-dir 

   Temporarily set library path directly due to CTK not exporting library.
   CMake/PackageDepends/MITK_CTK_Config.cmake


Tickets that are Outstanding (waiting to be merged) with MITK
=============================================================

The following is a list of differences as of 2014-05-29:

1. Branch: bug-16298-trac-2836-CppMicroservices-clang-build-error

   Minor error in CppMicroservices that makes the build fail with Clang 3.4.

2. Branch: bug-16299-trac-2836-MitkExt-clang-build-error

   Minor error in MitkExt that makes the build fail with Clang 3.4.

3. Branch bug-16316-trac-2845-crash-in-PointSetVtkMapper2D

   mitkPointSetVtkMapper2D crashes when the slice navigation controller does
   not have a CurrentPlaneGeometry. The fix uses the CurrentWorldGeometry2D
   of the renderer.

4. Branch bug-16336-trac-2864-contour-rendering-ignores-opacity-property

   Fixes the bug that the "opacity" property is ignored in when rendering
   the new mitk::ContourModel and mitk::ContourModelSet objects and 0.5
   opacity is used always.

5. Branch bug-16367-trac-2891-crash-in-volume-visualisation-plugin

   Fixes a crash in the volume visualisation plugin because of uninitalised
   data members.

6. Branch bug-16376-trac-2907-fixup-ctk-designer-plugins

   Makes sure CTK designer plugins have their paths fixed.
   Otherwise they wont run at run-time.

7. Branch bug-16409-trac-2551-inconsistent-state-of-display-events

   Recalculates the world position if the display position of the event is changed
   through a setter.

8. Branch bug-16698-trac-3038-points-cannot-be-removed-from-pointset

   Fixes of inconsistent state of point sets after point removal.

9. trac-3105-mavericks-build

   Fix for building MITK on Mavericks with OS X 10.8 (Mountain Lion) system
   framework.
   MITK bug: 16776.

10. Branch bug-16862-trac-3124-disable-repositioning-displayed-region-on-window-resize

    Introduces a flag to disable automatic repositioning and rescaling the displayed
    region when a render window is resized.

11. Branch bug-16895-trac-2627-block-snc-signals

    Introduces a function to block signals from mitk::SliceNavigationController.

12. Branch bug-17200-trac-3153-fix-for-workbench-exit-confirmation

    Fixes QCloseEvent handling that allows us to veto shutdown of the workbench.
    It is present on MITK master already, but cherry-picked back to our 2013.09 version.

13. Branch bug-17186-trac-3185-fix-for-cotire

    Reorders the position of generated boilerplate to come first in the list
    of source files. The precompiled-header tool cotire picks the first file
    to kick off PCH generation. So this change streamlines the whole process.

14. Branch bug-17473-trac-3270-pointset-renderer-crash

    Fix for point set renderer bug, check if the point set is empty.

15. Branch bug-17814-trac-3486-dont-set-visibility-by-name

    Fix for visibility issue, where planes updated via name, causing confusion.
    This branch is forked from niftk-2013.09, not master.
    So, no pull request for MITK. I expect they may doing something slightly different.

